<%- include('./partials/header.ejs') %>
<div class="max-w-2xl mx-auto p-6 bg-gray-800 rounded-lg mt-10 relative">
	<div
		class="absolute copieddiv hidden top-10 left-1/2 -translate-x-1/2 -translate-y-1/2 px-3 py-2 bg-blue-500 rounded-md shadow-lg">
		<h3 class="text-blue-100 text-xl">Link copied</h3>
	</div>
	<div class="flex justify-between items-center mb-4">
		<h1 class="text-2xl font-bold text-white">Khaatabook</h1>
		<div class="flex space-x-4">
			<button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-200">
				Encrypted
			</button>
			<button
				class="sharebtn text-gray-200 bg-gray-700 px-4 py-2 rounded flex items-center space-x-2 hover:bg-gray-600 transition duration-200">
				<span id="copyUrl">Share as a link</span>
			</button>
			<a
				href="/hisaab/delete/<%= hisaab._id %>"
				class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition duration-200"
				>Delete</a
			>
			<a
				href="/hisaab/edit/<%= hisaab._id %>"
				class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition duration-200"
				>Edit</a
			>
		</div>
	</div>
	<div class="text-gray-400 mb-4">
		Created on <%= hisaab.createdAt.getDate() %>-<%= hisaab.createdAt.getMonth() + 1 %>-<%= hisaab.createdAt.getFullYear() %>
	</div>
	<h2 class="text-xl font-semibold mb-2 text-gray-200"><%= hisaab.title %></h2>
	<p class="text-gray-300"><%= hisaab.description %></p>
</div>

<script>
	var timer;
	const sharebtn = document.querySelector('.sharebtn');
	sharebtn.addEventListener('click', function (e) {
		clearTimeout(timer);

		document.querySelector('.copieddiv').classList.remove('hidden');

		timer = setTimeout(function () {
			document.querySelector('.copieddiv').classList.add('hidden');
		}, 2000);
	});
	document
		.querySelector('#copyUrl')
		.addEventListener('click', function (event) {
			navigator.clipboard.writeText(window.location.href);
		});
</script>

<%- include('./partials/footer.ejs') %>
